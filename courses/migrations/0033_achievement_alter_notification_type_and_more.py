# Generated by Django 4.2.7 on 2025-08-13 08:21

from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone


class Migration(migrations.Migration):

    dependencies = [
        ('courses', '0032_course_stars_courseresult'),
    ]

    operations = [
        migrations.CreateModel(
            name='Achievement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(max_length=64, unique=True)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('condition_type', models.CharField(choices=[('passed_quizzes', '–ü—Ä–æ–π–¥–µ–Ω–æ –∫–≤–∏–∑–æ–≤ (>=70%)'), ('perfect_quizzes', '–ö–≤–∏–∑—ã –Ω–∞ 100%'), ('completed_courses', '–ó–∞–≤–µ—Ä—à–µ–Ω–æ –∫—É—Ä—Å–æ–≤'), ('total_stars', '–ù–∞–∫–æ–ø–ª–µ–Ω–æ –∑–≤—ë–∑–¥'), ('level_reached', '–î–æ—Å—Ç–∏–≥–Ω—É—Ç —É—Ä–æ–≤–µ–Ω—å')], max_length=32)),
                ('condition_value', models.IntegerField()),
                ('reward', models.CharField(help_text='–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–∑–∞/–Ω–∞–≥—Ä–∞–¥—ã (–Ω–∞–∫–ª–µ–π–∫–∏, —Ñ—É—Ç–±–æ–ª–∫–∞ –∏ —Ç.–¥.)', max_length=255)),
                ('reward_icon', models.CharField(blank=True, default='üéÅ', max_length=16)),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'ordering': ['condition_type', 'condition_value'],
            },
        ),
        migrations.AlterField(
            model_name='notification',
            name='type',
            field=models.CharField(choices=[('course_approved', '–ö—É—Ä—Å –¥–æ–±–∞–≤–ª–µ–Ω'), ('course_rejected', '–ö—É—Ä—Å –æ—Ç–∫–ª–æ–Ω—ë–Ω'), ('stars_awarded', '–ü–æ–ª—É—á–µ–Ω—ã –∑–≤—ë–∑–¥—ã'), ('profile_edit', '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è'), ('level_up', '–ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è'), ('quiz_started', '–ö–≤–∏–∑ –Ω–∞—á–∞—Ç'), ('quiz_completed', '–ö–≤–∏–∑ –∑–∞–≤–µ—Ä—à—ë–Ω'), ('group_added', '–î–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É'), ('rating_changed', '–ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ'), ('request_approved', '–ó–∞–ø—Ä–æ—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω'), ('request_rejected', '–ó–∞–ø—Ä–æ—Å –æ—Ç–∫–ª–æ–Ω—ë–Ω'), ('feedback_submitted', '–û—Ç–∑—ã–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω'), ('achievement_unlocked', '–û—Ç–∫—Ä—ã—Ç–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ')], max_length=30),
        ),
        migrations.CreateModel(
            name='StudentAchievement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('unlocked_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('notified', models.BooleanField(default=False)),
                ('achievement', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='achievements_unlocked', to='courses.achievement')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='unlocked_achievements', to='courses.student')),
            ],
            options={
                'ordering': ['-unlocked_at'],
                'unique_together': {('student', 'achievement')},
            },
        ),
    ]
