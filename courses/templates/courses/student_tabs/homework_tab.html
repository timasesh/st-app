{% load course_filters %}
<!-- –í–∫–ª–∞–¥–∫–∞ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π -->
<div id="homework" class="tab-pane">
    <div class="homework-container-modern">
        <!-- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="homework-hero-modern">
            <div class="homework-hero-content">
                <div class="hero-icon-section">
                    <div class="hero-main-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <div class="hero-floating-icons">
                        <div class="floating-icon icon-1">üìö</div>
                        <div class="floating-icon icon-2">‚úèÔ∏è</div>
                        <div class="floating-icon icon-3">üìù</div>
                    </div>
                </div>
                <div class="hero-text-section">
                    <h2 class="hero-title">–î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</h2>
                    <p class="hero-subtitle">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ —É—á–µ–±–Ω—ã–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</p>
                </div>
            </div>
        </div>

        <!-- –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="homework-stats-modern">
            <div class="stats-card pending-stats">
                <div class="stats-card-content">
                    <div class="stats-icon-wrapper">
                        <div class="stats-icon pending-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                    </div>
                    <div class="stats-info">
                        <div class="stats-number">{{ pending_homeworks_count|default:0 }}</div>
                        <div class="stats-label">–ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é</div>
                        <div class="stats-description">–ù–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è</div>
                    </div>
                </div>
                <div class="stats-card-bg"></div>
            </div>
            
            <div class="stats-card submitted-stats">
                <div class="stats-card-content">
                    <div class="stats-icon-wrapper">
                        <div class="stats-icon submitted-icon">
                            <i class="fas fa-paper-plane"></i>
                        </div>
                    </div>
                    <div class="stats-info">
                        <div class="stats-number">{{ submitted_homeworks_count|default:0 }}</div>
                        <div class="stats-label">–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</div>
                        <div class="stats-description">–û–∂–∏–¥–∞—é—Ç –æ—Ü–µ–Ω–∫–∏</div>
                    </div>
                </div>
                <div class="stats-card-bg"></div>
            </div>
            
            <div class="stats-card completed-stats">
                <div class="stats-card-content">
                    <div class="stats-icon-wrapper">
                        <div class="stats-icon completed-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                    </div>
                    <div class="stats-info">
                        <div class="stats-number">{{ completed_homeworks_count|default:0 }}</div>
                        <div class="stats-label">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</div>
                        <div class="stats-description">–ü–æ–ª—É—á–µ–Ω–∞ –æ—Ü–µ–Ω–∫–∞</div>
                    </div>
                </div>
                <div class="stats-card-bg"></div>
            </div>
        </div>

        <!-- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª –∑–∞–¥–∞–Ω–∏–π -->
        <div class="homework-section-modern">
            <div class="section-header">
                <h3 class="section-title">
                    <i class="fas fa-list-check"></i>
                    –í–∞—à–∏ –∑–∞–¥–∞–Ω–∏—è
                </h3>
                {% if recent_homeworks %}
                    <div class="homework-filters-modern">
                        <button class="filter-btn-modern active" data-filter="all">
                            <span>–í—Å–µ</span>
                            <div class="filter-indicator"></div>
                        </button>
                        <button class="filter-btn-modern" data-filter="pending">
                            <span>–ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é</span>
                            <div class="filter-indicator"></div>
                        </button>
                        <button class="filter-btn-modern" data-filter="submitted">
                            <span>–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</span>
                            <div class="filter-indicator"></div>
                        </button>
                        <button class="filter-btn-modern" data-filter="completed">
                            <span>–ó–∞–≤–µ—Ä—à–µ–Ω–æ</span>
                            <div class="filter-indicator"></div>
                        </button>
                    </div>
                {% endif %}
            </div>
            
            {% if recent_homeworks %}
                <div class="homework-grid-modern">
                    {% for homework in recent_homeworks %}
                        <div class="homework-card-modern 
                            {% if homework.submissions.first.is_completed %}homework-completed
                            {% elif homework.submissions.first.is_submitted %}homework-submitted
                            {% else %}homework-pending{% endif %}"
                            data-status="
                            {% if homework.submissions.first.is_completed %}completed
                            {% elif homework.submissions.first.is_submitted %}submitted
                            {% else %}pending{% endif %}">
                            
                            <!-- –°—Ç–∞—Ç—É—Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä -->
                            <div class="homework-status-indicator">
                                {% if homework.submissions.first.is_completed %}
                                    <div class="status-badge-hw status-completed">
                                        <i class="fas fa-trophy"></i>
                                        <span>–ó–ê–í–ï–†–®–ï–ù–û</span>
                                    </div>
                                {% elif homework.submissions.first.is_submitted %}
                                    <div class="status-badge-hw status-review">
                                        <i class="fas fa-eye"></i>
                                        <span>–ù–ê –ü–†–û–í–ï–†–ö–ï</span>
                                    </div>
                                {% else %}
                                    <div class="status-badge-hw status-new">
                                        <i class="fas fa-exclamation"></i>
                                        <span>–ö –í–´–ü–û–õ–ù–ï–ù–ò–Æ</span>
                                    </div>
                                {% endif %}
                            </div>

                            <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
                            <div class="homework-content-modern">
                                <div class="homework-header-modern">
                                    <div class="homework-icon-modern">
                                        {% if homework.submissions.first.is_completed %}
                                            <i class="fas fa-trophy"></i>
                                        {% elif homework.submissions.first.is_submitted %}
                                            <i class="fas fa-paper-plane"></i>
                                        {% else %}
                                            <i class="fas fa-file-alt"></i>
                                        {% endif %}
                                    </div>
                                    <div class="homework-title-section">
                                        <h4 class="homework-title-modern">{{ homework.title }}</h4>
                                        <div class="homework-teacher">
                                            <i class="fas fa-user-tie"></i>
                                            {{ homework.teacher.user.get_full_name|default:homework.teacher.user.username }}
                                        </div>
                                    </div>
                                </div>

                                <div class="homework-description-modern">
                                    {{ homework.description|truncatewords:25 }}
                                </div>

                                <!-- –î–µ–¥–ª–∞–π–Ω –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å -->
                                <div class="homework-deadline-section">
                                    <div class="deadline-info">
                                        <div class="deadline-icon">
                                            <i class="fas fa-calendar-alt"></i>
                                        </div>
                                        <div class="deadline-text">
                                            <span class="deadline-label">–°—Ä–æ–∫ —Å–¥–∞—á–∏</span>
                                            <span class="deadline-date">{{ homework.due_date|date:"d.m.Y H:i" }}</span>
                                        </div>
                                    </div>
                                    {% if homework.submissions.first.is_completed and homework.submissions.first.grade %}
                                        <div class="grade-display">
                                            <div class="grade-badge">{{ homework.submissions.first.grade }}</div>
                                        </div>
                                    {% endif %}
                                </div>

                                <!-- –î–µ–π—Å—Ç–≤–∏—è -->
                                <div class="homework-actions-modern">
                                    {% if homework.submissions.first.is_completed %}
                                        <a href="{% url 'student_homework_detail' homework.id %}" class="homework-action-btn completed-btn">
                                            <i class="fas fa-eye"></i>
                                            <span>–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</span>
                                            <div class="btn-arrow-hw"><i class="fas fa-arrow-right"></i></div>
                                        </a>
                                    {% elif homework.submissions.first.is_submitted %}
                                        <a href="{% url 'student_homework_detail' homework.id %}" class="homework-action-btn review-btn">
                                            <i class="fas fa-hourglass-half"></i>
                                            <span>–û–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏</span>
                                            <div class="btn-arrow-hw"><i class="fas fa-arrow-right"></i></div>
                                        </a>
                                    {% else %}
                                        <a href="{% url 'student_homework_detail' homework.id %}" class="homework-action-btn start-btn">
                                            <i class="fas fa-pen"></i>
                                            <span>–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ</span>
                                            <div class="btn-arrow-hw"><i class="fas fa-arrow-right"></i></div>
                                        </a>
                                    {% endif %}
                                </div>
                            </div>

                            <!-- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π -->
                            {% if homework.submissions.first.is_completed %}
                                <div class="homework-completion-effects">
                                    <div class="completion-sparkle-hw sparkle-hw-1">‚≠ê</div>
                                    <div class="completion-sparkle-hw sparkle-hw-2">üèÜ</div>
                                    <div class="completion-sparkle-hw sparkle-hw-3">‚ú®</div>
                                </div>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="no-homework-modern">
                    <div class="no-homework-illustration">
                        <div class="illustration-circle-hw">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <div class="floating-homework-elements">
                            <div class="floating-element-hw element-hw-1">üìö</div>
                            <div class="floating-element-hw element-hw-2">‚úèÔ∏è</div>
                            <div class="floating-element-hw element-hw-3">üìù</div>
                        </div>
                    </div>
                    <h3 class="no-homework-title">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞–Ω–∏–π</h3>
                    <p class="no-homework-text">–î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è –æ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏!</p>
                </div>
            {% endif %}
        </div>
    </div>
</div>
