{% load course_extras %}
{% load course_filters %}
<!-- –í–∫–ª–∞–¥–∫–∞ –∫—É—Ä—Å–æ–≤ -->
<div id="courses" class="tab-pane">
    <div class="courses-modern-grid">
        {% for course in courses %}
            <div class="course-card-modern">
                <div class="course-card-header">
                    <div class="course-image-container">
                        {% if course.image %}
                            <img src="{{ course.image.url }}" alt="{{ course.title }}" class="course-card-image">
                        {% else %}
                            <div class="course-card-image-placeholder">
                                <i class="fas fa-book"></i>
                            </div>
                        {% endif %}
                    </div>
                    <div class="course-progress-overlay">
                        <div class="progress-circle" data-progress="{{ progress_data|get_item:course.id|default:0 }}">
                            <svg class="progress-ring" width="60" height="60">
                                <circle class="progress-ring-circle" 
                                        stroke="#4A90E2" 
                                        stroke-width="4" 
                                        fill="transparent" 
                                        r="26" 
                                        cx="30" 
                                        cy="30"/>
                            </svg>
                            <div class="progress-text">{{ progress_data|get_item:course.id|default:0 }}%</div>
                        </div>
                    </div>
                </div>
                <div class="course-card-body">
                    <h3 class="course-card-title">{{ course.title }}</h3>
                    <div class="course-stats">
                        <div class="course-stat">
                            <i class="fas fa-layer-group"></i>
                            <span>{{ course.modules.count }} –º–æ–¥—É–ª–µ–π</span>
                        </div>
                        <div class="course-stat">
                            <i class="fas fa-tasks"></i>
                            <span>{{ course.get_total_lessons_count }} —É—Ä–æ–∫–æ–≤</span>
                        </div>
                        <div class="course-stat course-stars">
                            <i class="fas fa-star"></i>
                            <span>{{ course.stars }} –∑–≤—ë–∑–¥ –∑–∞ –∫—É—Ä—Å</span>
                        </div>
                    </div>
                    <div class="course-progress-modern">
                        <div class="progress-info">
                            <span class="progress-label">–ü—Ä–æ–≥—Ä–µ—Å—Å</span>
                            <span class="progress-percentage">{{ progress_data|get_item:course.id|default:0 }}%</span>
                        </div>
                        <div class="progress-bar-modern">
                            <div class="progress-fill" style="width: {{ progress_data|get_item:course.id|default:0 }}%;"></div>
                        </div>
                    </div>
                </div>
                <div class="course-card-footer">
                    <a href="{% url 'course_detail' course.id %}" class="course-continue-btn">
                        {% if course_completed_data|get_item:course.id %}
                            <i class="fas fa-eye"></i>
                            –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫—É—Ä—Å
                        {% else %}
                            <i class="fas fa-play"></i>
                            –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ
                        {% endif %}
                    </a>
                </div>
            </div>
        {% empty %}
            <div class="no-courses-container">
                <div class="no-courses-card">
                    <div class="no-courses-icon">üìö</div>
                    <h3 class="no-courses-title">–ü–æ–∫–∞ –Ω–µ—Ç –∫—É—Ä—Å–æ–≤</h3>
                    <p class="no-courses-text">–í—ã –µ—â—ë –Ω–µ –∑–∞–ø–∏—Å–∞–ª–∏—Å—å –Ω–∏ –Ω–∞ –æ–¥–∏–Ω –∫—É—Ä—Å. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫—É—Ä—Å–∞–º.</p>
                    <div class="no-courses-animation">
                        <i class="floating-book fas fa-book"></i>
                        <i class="floating-book fas fa-graduation-cap"></i>
                        <i class="floating-book fas fa-lightbulb"></i>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

    <!-- –§–æ—Ä–º–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –∫—É—Ä—Å—É -->
    <div class="join-course-section">
        <div class="join-course-card">
            <div class="join-course-header">
                <div class="join-course-icon">
                    <i class="fas fa-plus-circle"></i>
                </div>
                <h3 class="join-course-title">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫—É—Ä—Å—É</h3>
                <p class="join-course-subtitle">–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫—É—Ä—Å–∞, —á—Ç–æ–±—ã –∑–∞–ø–∏—Å–∞—Ç—å—Å—è</p>
            </div>
            
            <form method="post" class="join-course-form">
                {% csrf_token %}
                <div class="form-group-modern">
                    <div class="input-container">
                        <i class="input-icon fas fa-key"></i>
                        <input type="text" name="course_code" class="form-control-modern" placeholder="–ö–æ–¥ –∫—É—Ä—Å–∞" required>
                    </div>
                </div>
                <button type="submit" name="join_course" class="join-course-btn">
                    <i class="fas fa-paper-plane"></i>
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å
                </button>
            </form>
            
            <div class="join-course-help">
                <div class="help-item">
                    <i class="fas fa-info-circle"></i>
                    <span>–ö–æ–¥ –∫—É—Ä—Å–∞ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —É –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</span>
                </div>
                <div class="help-item">
                    <i class="fas fa-clock"></i>
                    <span>–ó–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º</span>
                </div>
                <div class="help-item">
                    <i class="fas fa-envelope"></i>
                    <span>–í—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ</span>
                </div>
            </div>
        </div>
    </div>
</div>
