{% load course_filters %}
<!-- –í–∫–ª–∞–¥–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π -->
<div id="achievements" class="tab-pane">
    <div class="achievements-wrap">
        <div class="achievements-hero">
            <div class="achievements-hero-icon">üèÜ</div>
            <div class="achievements-hero-text">
                <h2>–ú–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
                <p>–ü—Ä–æ—Ö–æ–¥–∏—Ç–µ –∫–≤–∏–∑—ã –∏ –∫—É—Ä—Å—ã, —Å–æ–±–∏—Ä–∞–π—Ç–µ –∑–≤—ë–∑–¥—ã –∏ –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –ø—Ä–∏–∑—ã!</p>
            </div>
        </div>

        <div class="achievements-grid">
            {% for sa in unlocked_achievements %}
                <div class="achievement-card unlocked">
                    <div class="achievement-header">
                        <div class="achievement-badge">{{ sa.achievement.reward_icon }}</div>
                        <div class="achievement-title">{{ sa.achievement.title }}</div>
                    </div>
                    <div class="achievement-description">{{ sa.achievement.description }}</div>
                    <div class="achievement-reward"><i class="fas fa-gift"></i> –ù–∞–≥—Ä–∞–¥–∞: {{ sa.achievement.reward }}</div>
                    <div class="achievement-progress">
                        <div class="progress-bar"><div class="fill" style="width: 100%"></div></div>
                        <div class="progress-meta">–û—Ç–∫—Ä—ã—Ç–æ: {{ sa.unlocked_at|date:"d.m.Y" }}</div>
                    </div>
                </div>
            {% empty %}
                <div class="no-levels-message">
                    <i class="fas fa-info-circle"></i>
                    <p>–ü–æ–∫–∞ –Ω–µ—Ç —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π ‚Äî –Ω–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫–≤–∏–∑–æ–≤!</p>
                </div>
            {% endfor %}
        </div>

        {% if locked_achievements %}
            <div class="levels-header" style="margin-top:1rem;">
                <h3 class="levels-title" style="font-size:1.4rem;"><i class="fas fa-unlock"></i> –ß—Ç–æ –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –¥–∞–ª–µ–µ</h3>
            </div>
            <div class="achievements-grid">
                {% for ach in locked_achievements %}
                    {% with p=progress_by_id|get_item:ach.id %}
                        <div class="achievement-card">
                            <div class="achievement-header">
                                <div class="achievement-badge">{{ ach.reward_icon }}</div>
                                <div class="achievement-title">{{ ach.title }}</div>
                            </div>
                            <div class="achievement-description">{{ ach.description }}</div>
                            <div class="achievement-reward"><i class="fas fa-gift"></i> –ù–∞–≥—Ä–∞–¥–∞: {{ ach.reward }}</div>
                            <div class="achievement-progress">
                                <div class="progress-bar"><div class="fill" style="width: {{ p.percentage|default:0 }}%"></div></div>
                                <div class="progress-meta">–ü—Ä–æ–≥—Ä–µ—Å—Å: {{ p.current|default:0 }} / {{ p.target|default:1 }}</div>
                            </div>
                        </div>
                    {% endwith %}
                {% endfor %}
            </div>
        {% endif %}
    </div>
</div>
